const leftSidebarButton=document.querySelector(".left-sidebar__button"),leftSidebarMenu=document.querySelector(".left-sidebar__menu");leftSidebarButton.addEventListener("click",(function(){leftSidebarMenu.classList.toggle("leftSidebarMenu")}));const blockElements=[{type:"block",width:"100%",height:"80px",bgColor:"#c6c3af"},{type:"block",width:"100%",height:"80px",bgColor:"#fff973"},{type:"block",width:"100%",height:"300px",bgColor:"pink"},{type:"block",width:"100%",height:"500px",bgColor:"#c6c3af"},{type:"block",width:"100%",height:"100px",bgColor:"#fff973"},{type:"block",width:"100%",height:"100px",bgColor:"pink"}],buttonElements=[{type:"button",width:"150px",height:"30px",bgColor:"#fff973",color:"black",text:"Кнопка"},{type:"button",width:"150px",height:"30px",bgColor:"#c6c3af",color:"black",text:"Кнопка"}],textElements=[{type:"text",width:"150px",height:"30px",fontSize:"20px",color:"#000",text:"Заголовок 2"},{type:"text",width:"150px",height:"30px",fontSize:"20px",color:"#000",text:"Ваш текст будет написан в этом блоке"}],imageElements=[{type:"image",width:"150px",height:"150px",border:"1px solid #c6c3af",bgImage:"url(./img/work-together.jpg)"}],iconElements=[{type:"icon",width:"24px",height:"24px",border:"1px solid #c6c3af",icon:"url(./img/social/facebook.svg)",link:"https://www.facebook.com"}];let categories=document.querySelectorAll(".categories__button");for(let e=0;e<categories.length;e++)categories[e].onclick=function(e){let t=e.target;if(t.classList.contains("left-sidebar__categories-block")){let e=blockElements,t="";for(let o of e)t+=`<div class="element" type="${o.type}" style="background: ${o.bgColor}; width: ${o.width}; height: ${o.height};"> </div>`;document.querySelector(".left-sidebar__elements").innerHTML=t,dragFromSidebar()}else if(t.classList.contains("left-sidebar__categories-button")){let e=buttonElements,t="";for(let o of e)t+=`<div class="element" type="${o.type}" style="color: ${o.color}; background-color: ${o.bgColor}; width: ${o.width}; height: ${o.height};">${o.text}</div>`;document.querySelector(".left-sidebar__elements").innerHTML=t,dragFromSidebar()}else if(t.classList.contains("left-sidebar__categories-text")){let e=textElements,t="";for(let o of e)t+=`<div class="element" type="${o.type}" style="color: ${o.color}; width: ${o.width}; height: ${o.height};">${o.text}</div>`;document.querySelector(".left-sidebar__elements").innerHTML=t,dragFromSidebar()}else if(t.classList.contains("left-sidebar__categories-image")){let e=imageElements,t="";for(let o of e)t+=`<div class="element" type="${o.type}" style="width: ${o.width}; border: ${o.border}; background-image: ${o.bgImage}; height: ${o.height};"> </div>`;document.querySelector(".left-sidebar__elements").innerHTML=t,dragFromSidebar()}else if(t.classList.contains("left-sidebar__categories-icon")){let e=iconElements,t="";for(let o of e)t+=`<div class="element" type="${o.type}" style="width: ${o.width}; border: ${o.border}; icon: ${o.icon}; height: ${o.height};"> </div>`;document.querySelector(".left-sidebar__elements").innerHTML=t,dragFromSidebar()}};function dragFromSidebar(){let e=document.querySelectorAll(".element"),t=0;for(let o=0;o<e.length;o++)e[o].onclick=function(e){const o=e.target.cloneNode(!0);t++,o.id=t,document.body.appendChild(o)}}document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem("login"),o=localStorage.getItem("firstname");null!=t&&(document.getElementById("wrapper__button").innerHTML=`<div>Привет, ${o}!</div><button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`)}));let errors=[];function showReg(e){errors=[],document.getElementById("windowReg").style.display=e,document.getElementById("gray").style.display=e}function showIn(e){document.getElementById("windowIn").style.display=e,document.getElementById("gray2").style.display=e;let t=localStorage.getItem("email"),o=localStorage.getItem("pass");null!=t&&(document.querySelector("#email__in").value=t),null!=t&&(document.querySelector("#pass__in").value=o)}function checkValidity(e){let t=e.validity;return console.log(t.valueMissing),t.valueMissing&&errors.push("Поле "+e.placeholder+" не заполнено"),t.patternMismatch&&errors.push("Не верный формат заполнения e-mail"),errors}function checkPassword(){let e=document.querySelector("#pass1").value,t=document.querySelector("#pass2").value;return console.log(e),null!=e&&(e.length<4&&errors.push("Минимальное значение пароля не может быть меньше, чем 4"),e.length>10&&errors.push("Максимальное значение пароля не может быть больше, чем 10"),-1===e.search(/[a-z]/)&&errors.push("Пароль должен содержать минимум одну прописную букву"),-1===e.search(/[A-Z]/)&&errors.push("Пароль должен содержать минимум одну заглавную букву"),-1===e.search(/[0123456789]/)&&errors.push("Пароль должен содержать минимум одну цифру"),e!=t&&errors.push("Пароль не совпадает!")),errors}function pushReg(){let e=document.querySelectorAll(".inputReg");console.log(e);for(let t of e)checkValidity(t);checkPassword(),0==errors?saveData():(document.getElementById("error").innerHTML=errors.join(".<br>"),errors=[]),document.querySelector("form").addEventListener("submit",(e=>e.preventDefault()))}function saveData(){let e=document.querySelector("#firstname").value,t=document.querySelector("#lastname").value,o=document.querySelector("#email").value,l=document.querySelector("#pass1").value,n=document.querySelector("#pass2").value;console.log(l,n),document.querySelector(".error").innerHTML="",null==localStorage.getItem("firstName")&&localStorage.setItem("firstname",e),null==localStorage.getItem("lastname")&&localStorage.setItem("lastname",t),null==localStorage.getItem("email")&&localStorage.setItem("email",o),null==localStorage.getItem("pass")&&localStorage.setItem("pass",n),localStorage.setItem("login",!0),document.getElementById("windowReg").style.display="none",document.getElementById("gray").style.display="none",document.querySelector("form").addEventListener("submit",(e=>e.preventDefault())),document.getElementById("wrapper__button").innerHTML=`<div>Привет, ${e}!</div><button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`}function getIn(){document.querySelector("#inForm").addEventListener("submit",(e=>e.preventDefault())),document.getElementById("windowIn").style.display="none",document.getElementById("gray2").style.display="none",document.getElementById("wrapper__button").innerHTML=`<div>Привет, ${localStorage.getItem("firstname")}!</div><button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`,localStorage.setItem("login",!0)}function outUser(){document.getElementById("wrapper__button").innerHTML='<button id="buttonReg" onclick="showReg(\'block\')" class="regButton">Регистрация</button>\n    <button id="buttonIn" onclick="showIn(\'block\')" class="regButton">Войти</button>',localStorage.removeItem("login")}const dragAndDrop=()=>{const e=document.querySelector(".menu"),t=document.querySelector(".template");let o=0;class l{constructor(e,t){this.type=e,this.classes=t}duplicate(){}showMenu(){}delete(){}saveToLS(){let e=[],t=null;localStorage.getItem("template")?(t=JSON.parse(localStorage.getItem("template")),t.length>1?e.push(...t,this):e.push(t,this),localStorage.setItem("template",JSON.stringify(e))):localStorage.setItem("template",JSON.stringify(this))}}class n extends l{constructor(e,t,o,l,n,r){super(e,t),this.width=o,this.height=l,this.posX=n,this.posY=r}changeHeight(){}changeWidth(){}changePosX(){}changePosY(){}}class r extends l{constructor(e,t,l){super(e,t),this.bgColor=l,this.templateInd=o++}setTemplateInd(){}setBackgroundColor(){}}class s extends n{constructor(e,t,o,l,n,r,s,i,a){super(e,t,o,l,n,r),this.bgColor=s,this.btnLabel=i,this.fontColor=a}setBackgroundColor(){}setBtnLabel(){}setFontColor(){}}const i=document.querySelectorAll(".menu__element");let a=!1,c=null,d=0,u=0;const g=function(o){console.log("drag start"),setTimeout((()=>{o.target.parentNode===e?c=o.target.cloneNode(!0):o.target.parentNode===t&&(c=o.target)}))},m=function(e){},p=function(e){a=!1,console.log("from menu"),u=e.offsetY,d=e.offsetX},h=function(e){console.log("from template"),console.log(`e.client: ${e.clientY},${e.clientX}`),console.log(e),console.log("offset E: "+e.offsetY,e.offsetX),console.log("offset: "+e.target.offsetTop,e.target.offsetLeft),a=!0,u=e.offsetY,d=e.offsetX};i.forEach((e=>{e.addEventListener("dragstart",g),e.addEventListener("dragend",m),e.addEventListener("mousedown",p)})),t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("dragenter",(function(e){e.preventDefault()})),t.addEventListener("drop",(function(e){e.preventDefault(),console.log("drag drop"),console.log(c),this.append(c),c.classList.remove("menu__element"),c.classList.add("template__element"),c.removeEventListener("mousedown",p),c.addEventListener("mousedown",h),c.addEventListener("dragstart",g),a?(c.style.top=e.clientY-u+"px",c.style.left=e.clientX-d+"px"):function(e,t){const o=t.dataset.type;let l=null;"block"===o?(t.classList.add("wide"),l=new r(o,t.classList,t.style.backgroundColor),l.saveToLS()):(t.classList.add("draggable-element"),t.style.top=e.layerY-u+"px",t.style.left=e.layerX-d+"px","button"===o&&(l=new s(o,t.classList,t.clientWidth,t.clientHeight,t.style.left,t.style.top,t.style.backgroundColor,t.innerHTML,t.style.color),l.saveToLS()))}(e,c)}))};dragAndDrop();