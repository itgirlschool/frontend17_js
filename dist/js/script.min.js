document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem("login"),n=localStorage.getItem("firstname");null!=t&&(document.getElementById("wrapper__button").innerHTML=`\n        <div>Привет, ${n}!</div>\n        <button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`)}));let errors=[];function showReg(e){errors=[],document.getElementById("windowReg").style.display=e,document.getElementById("gray").style.display=e}function showIn(e){document.getElementById("windowIn").style.display=e,document.getElementById("gray2").style.display=e;let t=localStorage.getItem("email"),n=localStorage.getItem("pass");null!=t&&(document.querySelector("#email__in").value=t),null!=t&&(document.querySelector("#pass__in").value=n)}function checkValidity(e){let t=e.validity;return console.log(t.valueMissing),t.valueMissing&&errors.push("Поле "+e.placeholder+" не заполнено"),t.patternMismatch&&errors.push("Не верный формат заполнения e-mail"),errors}function checkPassword(){let e=document.querySelector("#pass1").value,t=document.querySelector("#pass2").value;return console.log(e),null!=e&&(e.length<4&&errors.push("Минимальное значение пароля не может быть меньше, чем 4"),e.length>10&&errors.push("Максимальное значение пароля не может быть больше, чем 10"),-1===e.search(/[a-z]/)&&errors.push("Пароль должен содержать минимум одну прописную букву"),-1===e.search(/[A-Z]/)&&errors.push("Пароль должен содержать минимум одну заглавную букву"),-1===e.search(/[0123456789]/)&&errors.push("Пароль должен содержать минимум одну цифру"),e!=t&&errors.push("Пароль не совпадает!")),errors}function pushReg(){let e=document.querySelectorAll(".inputReg");console.log(e);for(let t of e)checkValidity(t);checkPassword(),0==errors?saveData():(document.getElementById("error").innerHTML=errors.join(".<br>"),errors=[]),document.querySelector("form").addEventListener("submit",(e=>e.preventDefault()))}function saveData(){let e=document.querySelector("#firstname").value,t=document.querySelector("#lastname").value,n=document.querySelector("#email").value,o=document.querySelector("#pass1").value,l=document.querySelector("#pass2").value;console.log(o,l),document.querySelector(".error").innerHTML="",null==localStorage.getItem("firstName")&&localStorage.setItem("firstname",e),null==localStorage.getItem("lastname")&&localStorage.setItem("lastname",t),null==localStorage.getItem("email")&&localStorage.setItem("email",n),null==localStorage.getItem("pass")&&localStorage.setItem("pass",l),localStorage.setItem("login",!0),document.getElementById("windowReg").style.display="none",document.getElementById("gray").style.display="none",document.querySelector("form").addEventListener("submit",(e=>e.preventDefault())),document.getElementById("wrapper__button").innerHTML=`<div>Привет, ${e}!</div><button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`}function getIn(){document.querySelector("#inForm").addEventListener("submit",(e=>e.preventDefault())),document.getElementById("windowIn").style.display="none",document.getElementById("gray2").style.display="none",document.getElementById("wrapper__button").innerHTML=`<div>Привет, ${localStorage.getItem("firstname")}!</div><button id="buttonOut" onclick="outUser()" class="regButton">Выйти</button>`,localStorage.setItem("login",!0)}function outUser(){document.getElementById("wrapper__button").innerHTML='<button id="buttonReg" onclick="showReg(\'block\')" class="regButton">Регистрация</button>\n    <button id="buttonIn" onclick="showIn(\'block\')" class="regButton">Войти</button>',localStorage.removeItem("login")}let json='[{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "80px",\n    "background-color": "#DCDCDC"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "80px",\n    "background-color": "#fff973dd"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "500px",\n    "background-color": "#FFE4E1"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "500px",\n    "background-color": "#DCDCDC"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "100px",\n    "background-color": "#fff973dd"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "100px",\n    "background-color": "#FFE4E1"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "80px",\n    "background-color": "#F0FFF0"}\n}, {\n\t"type": "block",\n        "style":{\n\t"width": "100%",\n\t"height": "500px",\n\t"background-color": "#FFFFF0"}\n},{\n\t"type": "block",\n        "style":{\n\t"width": "100%",\n\t"height": "150px",\n\t"background-color": "#c6c3af",\n\t"border-radius": "40px"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100px",\n    "height": "100px",\n    "border": "thick solid grey"}\n},{\n\t"type": "block",\n        "style":{\n\t"width": "80px",\n\t"height": "80px",\n\t"background-color": "grey",\n\t"border-radius": "50%"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100px",\n    "height": "50px",\n    "background-color": "#fff973",\n    "border-radius": "100px / 50px"}\n},{\n    "type": "block",\n        "style":{\n    "width": "100%",\n    "height": "100px",\n    "background-color": "pink"}\n},{\n\t"type": "button",\n        "style":{\n\t"width": "150px",\n\t"height": "30px",\n\t"background-color": "#fff973",\n\t"color": "black"},\n\t"text": "Кнопка"\n},{\n\t"type": "button",\n        "style":{\n\t"width": "150px",\n\t"height": "30px",\n\t"background-color": "#c6c3af",\n\t"color": "black"},\n\t"text": "Кнопка"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "black",\n    "color": "white",\n    "font-family": "Courier New",\n    "font-size": "16px"},\n    "text": "View More"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "white",\n    "color": "black",\n    "font-size": "20px"},\n    "text": "Read More"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "rgb(11, 47, 91)",\n    "color": "rgb(202, 215, 231)",\n    "font-family": "Trebuchet MS",\n    "font-size": "20px",\n    "border": "2px solid rgb(202, 215, 231)"},\n    "text": "SEND"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "rgb(63, 118, 82)",\n    "color": "white",\n    "font-family": "Cambria",\n    "font-size": "20px",\n    "border-radius": "40px"},\n    "text": "SHOP &#8594;"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "white",\n    "color": "blue",\n    "font-family": "Helvetica",\n    "font-size": "20px"},\n    "text": "VIEW ALL"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "rgb(7, 61, 81)",\n    "color": "white",\n    "font-family": "Helvetica",\n    "font-size": "14px"},\n    "text": "DOWNLOAD"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "14px",\n    "border-radius": "40px"},\n    "text": "JOIN US"\n},{\n    "type": "button",\n        "style":{\n    "width": "70px",\n    "height": "40px",\n    "background-color": "pink",\n    "color": "red",\n    "font-family": "Helvetica",\n    "font-size": "40px",\n    "border-radius": "100px"},\n    "text": "&#10084;"\n},{\n    "type": "button",\n        "style":{\n    "width": "70px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#10006;"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#128386;"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#9742;"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#9997;"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#9786;"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(229, 235, 250)",\n    "color": "rgb(4, 107, 254)",\n    "font-family": "Helvetica",\n    "font-size": "30px",\n    "border-radius": "5px"},\n    "text": "&#10046;"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "white",\n    "color": "rgb(63, 118, 82)",\n    "font-family": "Franklin Gothic Medium",\n    "font-size": "18px",\n    "font-style": "italic"},\n    "text": "Apply Now"\n},{\n    "type": "button",\n        "style":{\n    "width": "150px",\n    "height": "40px",\n    "background-color": "white",\n    "color": "rgb(63, 118, 82)",\n    "font-family": "Arial",\n    "font-size": "18px",\n    "border": "2px solid rgb(63, 118, 82)"},\n    "text": "Featured"\n},{\n    "type": "button",\n        "style":{\n    "width": "45px",\n    "height": "40px",\n    "background-color": "rgb(255, 252, 204)",\n    "color": "rgb(161, 103, 7)",\n    "font-family": "Helvetica",\n    "font-size": "30px"},\n    "text": "&#62;"\n},{\n    "type": "button",\n        "style":{\n    "width": "110px",\n    "height": "40px",\n    "background-color": "rgb(255, 248, 107)",\n    "color": "black",\n    "font-family": "Verdana",\n    "font-size": "18px",\n    "font-weight": "bold"},\n    "text": "SEND"\n},{\n    "type": "button",\n        "style":{\n    "width": "110px",\n    "height": "40px",\n    "background-color": "white",\n    "color": "rgb(12, 68, 38)",\n    "font-family": "Franklin Gothic Medium",\n    "font-size": "16px"},\n    "text": "BACK TO TOP"\n},{\n    "type": "button",\n        "style":{\n    "width": "40px",\n    "height": "40px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 512 512\'>\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d=\'M256 112c-48.6 0-88 39.4-88 88C168 248.6 207.4 288 256 288s88-39.4 88-88C344 151.4 304.6 112 256 112zM256 240c-22.06 0-40-17.95-40-40C216 177.9 233.9 160 256 160s40 17.94 40 40C296 222.1 278.1 240 256 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-46.73 0-89.76-15.68-124.5-41.79C148.8 389 182.4 368 220.2 368h71.69c37.75 0 71.31 21.01 88.68 54.21C345.8 448.3 302.7 464 256 464zM416.2 388.5C389.2 346.3 343.2 320 291.8 320H220.2c-51.36 0-97.35 26.25-124.4 68.48C65.96 352.5 48 306.3 48 256c0-114.7 93.31-208 208-208s208 93.31 208 208C464 306.3 446 352.5 416.2 388.5z\' fill=\'#401a49\'/></svg>"\n}, {\n    "type": "button",\n        "style":{\n    "width": "48px",\n    "height": "48px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' height=\'48\' width=\'48\'><path d=\'M6 36V33H42V36ZM6 25.5V22.5H42V25.5ZM6 15V12H42V15Z\' fill=\'#401a49\'/></svg>"\n}, {\n    "type": "button",\n        "style":{\n    "width": "48px",\n    "height": "48px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' height=\'48\' width=\'48\'><path d=\'M24 32.35 14.35 22.7 16.5 20.55 22.5 26.55V8H25.5V26.55L31.5 20.55L33.65 22.7ZM11 40Q9.8 40 8.9 39.1Q8 38.2 8 37V29.85H11V37Q11 37 11 37Q11 37 11 37H37Q37 37 37 37Q37 37 37 37V29.85H40V37Q40 38.2 39.1 39.1Q38.2 40 37 40Z\' fill=\'#401a49\'/></svg>"\n}, {\n    "type": "button",\n        "style":{\n    "width": "48px",\n    "height": "48px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' height=\'48\' width=\'48\'><path d=\'M23 33.5H25.25V25.3H33.5V23H25.25V14.5H23V23H14.5V25.3H23ZM24 43Q20 43 16.525 41.55Q13.05 40.1 10.475 37.525Q7.9 34.95 6.45 31.475Q5 28 5 24Q5 20 6.45 16.55Q7.9 13.1 10.475 10.525Q13.05 7.95 16.525 6.475Q20 5 24 5Q28 5 31.45 6.475Q34.9 7.95 37.475 10.525Q40.05 13.1 41.525 16.55Q43 20 43 24Q43 28 41.525 31.475Q40.05 34.95 37.475 37.525Q34.9 40.1 31.45 41.55Q28 43 24 43ZM24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24ZM24 40.75Q30.9 40.75 35.825 35.825Q40.75 30.9 40.75 24Q40.75 17.1 35.825 12.175Q30.9 7.25 24 7.25Q17.1 7.25 12.175 12.175Q7.25 17.1 7.25 24Q7.25 30.9 12.175 35.825Q17.1 40.75 24 40.75Z\' fill=\'#401a49\'/></svg>"\n}, {\n\t"type": "text",\n        "style":{\n\t"textStyle": "header_h1",\n\t"width": "150px",\n\t"font-size": "29px",\n\t"color": "#000",\n\t"font-family": "Verdana"},\n    "text": "Название"\n},{\n    "type": "text",\n        "style":{\n    "textStyle": "header_h2",\n    "width": "150px",\n    "font-size": "26px",\n    "color": "#000",\n    "font-family": "Verdana"},\n    "text": "Заголовок"\n},{\n\t"type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n\t"font-size": "14px",\n\t"color": "#000"},\n\t"text": "Ваш текст будет написан в этом блоке"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Arial"},\n    "text": "Arial"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Times New Roman"},\n    "text": "Times New Roman"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Courier New"},\n    "text": "Courier New"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Verdana"},\n    "text": "Verdana"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Trebuchet MS"},\n    "text": "Trebuchet MS"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Cambria"},\n    "text": "Cambria"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Franklin Gothic Medium"},\n    "text": "Franklin Gothic Medium"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "20px",\n    "color": "#000",\n    "font-family": "Helvetica"},\n    "text": "Helvetica"\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "16px",\n    "color": "#000",\n    "font-family": "Helvetica"},\n    "text": "Helvetica Light is an easy-to-read font, with tall and narrow letters, that works well on almost every site."\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "16px",\n    "color": "#000",\n    "font-family": "Helvetica",\n    "font-weight": "bold"},\n    "text": "Helvetica Light is an easy-to-read font, with tall and narrow letters, that works well on almost every site."\n},{\n    "type": "text",\n        "style":{\n\t"textStyle": "simple_text",\n\t"width": "150px",\n    "font-size": "16px",\n    "color": "#000",\n    "font-family": "Helvetica",\n    "font-style": "italic"},\n    "text": "Helvetica Light is an easy-to-read font, with tall and narrow letters, that works well on almost every site."\n},{\n\t"type": "image",\n        "style":{\n\t"width": "300px",\n\t"height": "300px",\n\t"border": "1px solid #c6c3af",\n\t"background-image": "url(./img/bar-chart.png)",\n    "background-size": "contain"}\n},{\n\t"type": "image",\n        "style":{\n\t"width": "300px",\n\t"height": "300px",\n\t"border": "1px solid #c6c3af",\n\t"background-image": "url(./img/team-work.png)",\n    "background-size": "contain"}\n},{\n    "type": "image",\n        "style":{\n    "width": "150px",\n    "height": "150px",\n    "border": "1px solid #c6c3af",\n    "background-image": "url(./img/letter.png)",\n    "background-size": "contain"}\n},{\n    "type": "image",\n        "style":{\n    "width": "150px",\n    "height": "150px",\n    "border": "1px solid #c6c3af",\n    "background-image": "url(./img/web-programming.png)",\n    "background-size": "contain"}\n},{\n    "type": "icon",\n        "style":{\n    "width": "30px",\n    "height": "30px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 448 512\'><path d=\'M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\'/></svg>",\n    "link": "https://www.facebook.com"\n},{\n    "type": "icon",\n        "style":{\n    "width": "30px",\n    "height": "30px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 448 512\'><path d=\'M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z\'/></svg>",\n    "link": "https://www.twitter.com"\n},{\n    "type": "icon",\n        "style":{\n    "width": "30px",\n    "height": "30px"},\n    "svg": "<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 496 512\'><path d=\'M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z\'/></svg>",\n    "link": "https://www.telegram.com"\n}]\n';const leftSidebarButton=document.querySelector(".left-sidebar__button"),leftSidebarMenu=document.querySelector(".left-sidebar__menu"),leftSidebarElements=document.querySelector(".left-sidebar__elements");leftSidebarButton.addEventListener("click",(function(){leftSidebarMenu.classList.toggle("leftSidebarMenu")}));let blocksArray=[],buttonsArray=[],textArray=[],imagesArray=[],iconsArray=[];jsonElements=JSON.parse(json),jsonElements.forEach((e=>{const t=e.type;let n='<div class="element elementPreview flexible" draggable="true"';const o=Object.entries(e);let l="";switch(o.forEach((e=>{if("style"===e[0]){const t=Object.entries(e[1]);n+=' style="',t.forEach((e=>{n+=`${e[0]}:${e[1]}; `})),n+='"'}else"text"===e[0]||"svg"===e[0]?l=e[1]:n+=` ${e[0]}="${e[1]}"`})),n+=`>${l}</div>`,!0){case"block"==t:blocksArray.push(n);break;case"button"==t:buttonsArray.push(n);break;case"text"==t:textArray.push(n);break;case"image"==t:imagesArray.push(n);break;case"icon"==t:iconsArray.push(n)}}));let categories=document.querySelectorAll(".categories__button");for(let e=0;e<categories.length;e++)categories[e].addEventListener("click",(function(e){let t=e.target;switch(!0){case t.classList.contains("left-sidebar__categories-block"):leftSidebarElements.classList.add("menuFlexStyle"),drawMenu(blocksArray);break;case t.classList.contains("left-sidebar__categories-button"):leftSidebarElements.classList.add("menuFlexStyle"),drawMenu(buttonsArray);break;case t.classList.contains("left-sidebar__categories-text"):leftSidebarElements.classList.remove("menuFlexStyle"),drawMenu(textArray);break;case t.classList.contains("left-sidebar__categories-image"):leftSidebarElements.classList.remove("menuFlexStyle"),drawMenu(imagesArray);break;case t.classList.contains("left-sidebar__categories-icon"):leftSidebarElements.classList.add("menuFlexStyle"),drawMenu(iconsArray);break}dragAndDrop()}));function drawMenu(e){let t="";for(let n of e)t+=n;leftSidebarElements.innerHTML=t}let templateIndCount=0;const menuBlock=document.querySelector(".left-sidebar__elements"),templateBlock=document.querySelector(".template");templateBlock.addEventListener("dragover",dragOver),templateBlock.addEventListener("dragenter",dragEnter),templateBlock.addEventListener("dragleave",dragLeave),templateBlock.addEventListener("drop",dragDrop,{capture:!0});const elementsProps={templNameBtn:{classes:["btnForm","selectTemplateBtn"]},templateNameInput:{classes:["inputReg","templateNameInput"],id:"projectname",placeholder:"Название проекта",type:"text"}};function handleDocLoad(){isUserTemplateInLS(userLoggedIn())&&renderPopup("open")}function userLoggedIn(){const e=localStorage.getItem("email");return!(!e||"true"!==localStorage.getItem("login"))&&e}function isUserTemplateInLS(e){return null!==localStorage.getItem(e)}function renderHeader(){renderSaveBtn(),renderListBtn()}function renderSaveBtn(){const e=document.createElement("div");e.classList.add("headerBtn","save"),e.innerHTML='<img src="./img/save.svg" alt="Save to Local Storage">',document.querySelector("header").prepend(e),document.querySelector(".save").addEventListener("click",handleSaveClick)}function renderListBtn(){const e=document.createElement("div");e.classList.add("headerBtn","list"),e.innerHTML='<img src="./img/list.svg" alt="List of Projects">',document.querySelector("header").prepend(e),document.querySelector(".list").addEventListener("click",handleListClick)}function renderProjBtn(e,t,n){let o;console.log(t),o=document.createElement("button"),o.textContent=t.name,o.classList.add("btnForm","selectTemplateBtn"),o.dataset.id=n,o.dataset.action=e,document.querySelector("#windowSelectTemplate > .popup__form").append(o),o.addEventListener("click",selectTemplate)}function selectTemplate(e){e.preventDefault();const t=userLoggedIn(),n=JSON.parse(localStorage.getItem(t));"open"===e.target.dataset.action?(renderHtmlById(e.target.dataset.id,n),handleTemplateLoad()):"save"===e.target.dataset.action?saveTemplateAs(e.target.dataset.id):"list"===e.target.dataset.action&&(renderHtmlById(e.target.dataset.id,n),handleTemplateLoad()),showPopup("none")}function renderPopup(e){const t=document.querySelector("#windowSelectTemplate > .popup__form");t.innerHTML="";const n=userLoggedIn();if(isUserTemplateInLS(n)){const t=JSON.parse(localStorage.getItem(n));try{t.forEach(((t,n)=>{renderProjBtn(e,t,n)}))}catch(n){renderProjBtn(e,t,0)}}let o;"open"===e?(o=renderTitle("Выберите проект"),t.prepend(o),addEmptyTemplateBtn(t)):"save"===e?(isUserTemplateInLS(n)&&(o=renderTitle("Сохранить под именем:"),t.prepend(o)),addNewTemplateInput(t)):"list"===e&&(console.log("list"),isUserTemplateInLS(n)?(o=renderTitle("Мои проекты"),renderEditIcons()):o=renderTitle("Вы пока не сохранили ни одного проекта"),t.prepend(o)),showPopup("block")}function renderEditIcons(){document.querySelectorAll(".selectTemplateBtn").forEach((e=>{const t=document.createElement("div");t.classList.add("popup__form--wrapper"),t.dataset.id=e.dataset.id,e.before(t),t.append(e),renderIcon("change-name",t,e),renderIcon("delete",t,e)}));document.querySelectorAll(".btnForm--icon").forEach((e=>{"change-name"===e.dataset.type?e.addEventListener("click",handleChangeNameClick):"delete"===e.dataset.type&&e.addEventListener("click",handleDeleteClick)}))}function handleChangeNameClick(e){let t,n;"IMG"===e.target.tagName?(t=e.target.parentNode.dataset.id,n=e.target.parentNode,e.target.src="./img/save.svg"):(t=e.target.dataset.id,n=e.target,e.target.childNodes[0].src="./img/save.svg"),n.removeEventListener("click",handleChangeNameClick),n.addEventListener("click",saveChangedName);const o=document.querySelector(`.selectTemplateBtn[data-id="${t}"]`);o.removeEventListener("click",selectTemplate),o.contentEditable=!0,o.focus()}function handleDeleteClick(e){let t;e.preventDefault(),t="IMG"===e.target.tagName?e.target.parentNode.dataset.id:e.target.dataset.id;const n=document.querySelector(`div[data-id="${t}"]`);deleteTemplateFromLS(t),n.remove()}function deleteTemplateFromLS(e){const t=userLoggedIn(),n=JSON.parse(localStorage.getItem(t));n.splice(e,1),localStorage.setItem(t,JSON.stringify(n))}function renderIcon(e,t,n){let o=document.createElement("div");o.classList.add("btnForm","btnForm--icon"),o.dataset.id=n.dataset.id,o.dataset.type=e,o.innerHTML=`<img src="./img/${e}.svg" alt="icon">`,t.append(o)}function renderTitle(e){let t=document.createElement("h2");return t.innerHTML=e,t}function addEmptyTemplateBtn(e){const t=document.createElement("button");t.textContent="Создать новый проект",t.classList.add("btnForm"),e.append(t),t.addEventListener("click",openEmptyProject)}function addNewTemplateInput(e){let t=renderTitle("Новый проект:");e.append(t);const n=document.createElement("input"),o=elementsProps.templateNameInput;o.classes.forEach((e=>{n.classList.add(e)})),n.id=o.id,n.placeholder=o.placeholder,n.type=o.type,e.append(n);const l=document.createElement("button");l.textContent="Сохранить",l.classList.add("btnForm"),e.append(l),l.addEventListener("click",saveNewTemplate)}function openEmptyProject(){showPopup("none")}function showPopup(e){document.getElementById("windowSelectTemplate").style.display=e,document.getElementById("grayBackground").style.display=e}function handleListClick(){renderPopup("list")}function handleSaveClick(e){const t=userLoggedIn();console.log(t),renderPopup("save")}function saveNewTemplate(e){const t=userLoggedIn(),n={name:document.querySelector("#projectname").value,html:templateBlock.innerHTML};if(isUserTemplateInLS(t)){let e=[],o=null;o=JSON.parse(localStorage.getItem(t)),o.length>1?e.push(...o,n):e.push(o,n),localStorage.setItem(t,JSON.stringify(e))}else localStorage.setItem(t,JSON.stringify(n));showPopup("none")}function handleTemplateLoad(){getTemplateElements().forEach((e=>{addListenersForNewElement(e)}))}function getTemplateElements(){return document.querySelectorAll(".template__element")}function saveChangedName(e){let t,n;console.log("save as"),"IMG"===e.target.tagName?(t=e.target.parentNode.dataset.id,n=e.target.parentNode,e.target.src="./img/change-name.svg"):(t=e.target.dataset.id,n=e.target,n.childNodes[0].src="./img/change-name.svg");const o=document.querySelector(`.selectTemplateBtn[data-id="${t}"]`);newName=o.innerHTML.replace("<br>",""),console.log(newName);const l=userLoggedIn(),a=JSON.parse(localStorage.getItem(l));a.length>1?a[t].name=newName:a.name=newName,localStorage.removeItem(l),localStorage.setItem(l,JSON.stringify(a)),console.log(JSON.parse(localStorage.getItem(l))[t]),o.addEventListener("click",selectTemplate),o.contentEditable=!1,o.blur(),n.removeEventListener("click",saveChangedName),n.addEventListener("click",handleChangeNameClick)}function saveTemplateAs(e){const t=userLoggedIn(),n=templateBlock.innerHTML,o=JSON.parse(localStorage.getItem(t));o.length>1?o[e].html=n:o.html=n,localStorage.setItem(t,JSON.stringify(o))}function renderHtmlById(e,t){let n;t.length>1?(html=t[e].html,n=t[e].name):(html=t.html,n=t.name),addTitleToHeader(n),templateBlock.innerHTML=html}function addTitleToHeader(e){document.querySelector("header").innerHTML+=`<div class="header__title">${e}</div>`,document.querySelector(".list").addEventListener("click",handleListClick),document.querySelector(".save").addEventListener("click",handleSaveClick)}renderHeader(),handleDocLoad();let templateFlag=!1,movingElement=null,elementX=0,elementY=0;function dragAndDrop(){document.querySelectorAll(".element").forEach((e=>{e.addEventListener("dragstart",dragStart),e.addEventListener("dragend",dragEnd)}))}function dragStart(e){getPosition(e),getTemplateFlag(e),setTimeout((()=>{e.target.parentNode.isSameNode(menuBlock)?movingElement=e.target.cloneNode(!0):e.target.parentNode.isSameNode(templateBlock)&&(movingElement=e.target)}))}function dragEnd(e){e.preventDefault()}function dragOver(e){e.preventDefault()}function dragEnter(e){e.preventDefault()}function dragLeave(e){e.preventDefault()}function dragDrop(e){e.stopPropagation(),e.preventDefault(),e.target.isSameNode(movingElement)||(this.append(movingElement),movingElement.classList.remove("element","elementPreview"),movingElement.classList.add("template__element"),addListenersForNewElement(movingElement),templateFlag?setPosition(e):createNewElement(e,movingElement))}function createNewElement(e,t){const n=t.dataset.type;if("block"===n)t.classList.add("wide");else switch(t.classList.add("draggable-element"),setPosition(e),n){case"button":t.classList.add("template__button");break;case"icon":break;case"text":t.style.width="";const e=t.dataset.textstyle;t.classList.add(e,"template__text");break;case"image":t.classList.add("template__image")}}function addListenersForNewElement(e){e.addEventListener("click",handleClick),e.addEventListener("dblclick",handleDoubleClick),e.addEventListener("focusout",handleFocusOut),e.addEventListener("dragstart",dragStart)}function pasteCopiedElement(e){templateBlock.append(e),e.style.top=e.style.top.slice(0,-2)- -50+"px",e.style.left=e.style.left.slice(0,-2)- -50+"px",e.classList.remove("selected"),addListenersForNewElement(e)}function getTemplateFlag(e){templateFlag=!!e.target.parentNode.isSameNode(templateBlock)}function setPosition(e){const t=document.scrollingElement.scrollTop;offParTop=e.target.offsetParent.offsetTop,offParLeft=e.target.offsetParent.offsetLeft,movingElement.style.top=e.clientY-elementY-offParTop+t+"px",movingElement.style.left=e.clientX-elementX-offParLeft+"px"}function getPosition(e){elementY=e.offsetY,elementX=e.offsetX}function getTarget(e){let t;return t="path"===e.target.tagName?e.target.parentNode.parentNode:"svg"===e.target.tagName?e.target.parentNode:e.target,t}function handleClick(e){let t=getTarget(e);t.classList.add("selected"),t.focus(),t.addEventListener("keydown",handleKeyDown)}function handleDoubleClick(e){let t=getTarget(e);t.contentEditable=!0,t.removeEventListener("click",handleClick),t.removeEventListener("keydown",handleKeyDown),t.classList.add("selected"),"text"===t.dataset.type&&(t.style.height="auto")}function handleFocusOut(e){let t=getTarget(e);window.getSelection().removeAllRanges(),t.contentEditable=!1,t.classList.remove("selected"),t.addEventListener("click",handleClick)}function handleKeyDown(e){if(e.preventDefault(),!0===e.ctrlKey&&"c"===e.key)movingElement=e.target.cloneNode(!0);else if(!0===e.ctrlKey&&"v"===e.key)pasteCopiedElement(movingElement);else if("Delete"===e.key)e.target.remove();else if("ArrowLeft"===e.key){let t=e.target.style.left;e.target.style.left=t.slice(0,t.length-2)-1+"px"}else if("ArrowRight"===e.key){let t=e.target.style.left;e.target.style.left=t.slice(0,t.length-2)- -1+"px"}else if("ArrowUp"===e.key){let t=e.target.style.top;e.target.style.top=t.slice(0,t.length-2)-1+"px"}else if("ArrowDown"===e.key){let t=e.target.style.top;e.target.style.top=t.slice(0,t.length-2)- -1+"px"}}